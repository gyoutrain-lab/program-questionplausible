from gpt4all import GPT4All
import csv
import random
import json

# Initialize the local GPT4All model
model = GPT4All("ggml-gpt4all-j-v1.3-groovy")  # adjust to your local model filename

def generate_question_batch(topic, num_questions=50, language="id"):
    """
    Generate a batch of questions based on a topic or keyword.
    Returns a list of questions as strings.
    """
    prompt = f"""
You are an expert quiz creator. Generate {num_questions} questions in {language} 
about the following topic: "{topic}".
- Each question should be concise, clear, and relevant.
- Return the output as a JSON array of questions.
"""
    response = model.generate(prompt)
    try:
        questions = json.loads(response.strip())
        if isinstance(questions, list):
            return questions
        else:
            raise ValueError
    except:
        print("[WARNING] Could not parse model
